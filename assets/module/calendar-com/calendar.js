+function(a){"use strict";function t(t,i){this.$container=a(t).empty(),this.set=i,this.date=new Date(i.timestamp||Date.now()),this.thisYear=this.year=this.date.getFullYear(),this.thisMonth=this.month=this.date.getMonth()+1,this.thisDay=this.day=this.date.getDate(),this.initDom(),this.prev(),this.next(),this.dayclick()}function i(a){return(a=""+a).length>1?a:"0"+a}function n(a){return t.language[a]}function e(i,n){return"number"==typeof i?(i={timestamp:parseInt(i)},"object"==typeof n&&(i=c(i,n)),n=c({},t.configDefault,i)):n="object"==typeof i?c({},t.configDefault,i):t.configDefault,this.each(function(){var i=a(this),e=i.data("xui.calendar");e||i.data("xui.calendar",e=new t(this,n))})}require(["css!module/calendar-com/calendar"]);var s='<div class="calendar-com"><header class="calendar-header pr"><a href="javascript:;" class="calendar-prev pa"><i class="icon icon-chevron-left"></i></a><a href="javascript:;" class="calendar-next pa"><i class="icon icon-chevron-right"></i></a><div class="calendar-date"></div></header><div class="calendar-body"><ul class="calendar-indi list-unstyled cf"></ul><ul class="calendar-list list-unstyled cf"></ul></div></div>',c=a.extend;t.configDefault={timestamp:null,format:"yyyy-mm-dd hh:ii",autoclose:!1,dayclick:!0},t.language=["一","二","三","四","五","六","日"],t.prototype={constructor:t,initDom:function(){this.$calendar=a(s).appendTo(this.$container),this.appendIndicator(),this.appendDay()},appendIndicator:function(){this.$calendar.find(".calendar-indi").append(t.language.map(function(a){return"<li>"+a+"</li>"}).join(""))},appendDay:function(){for(var a=this.$calendar,t=this.year,e=this.month,s=this.getDaysInMonth(),c=new Date(t+"-"+e+"-1").getDay()||7,r=s+c-1,l=[],d=0;r>d;d++){var h=d-c+2;if(h>0){var o=t+"-"+i(e)+"-"+i(h),u=n((new Date(o).getDay()||7)-1);l.push('<li data-date="'+o+'" data-week="'+u+'">'+h+"</li>")}else l.push("<li></li>")}a.find(".calendar-date").text(t+"年"+e+"月"),a.find(".calendar-list").empty().append(l.join("")),t===this.thisYear&&e===this.thisMonth&&this.day===this.thisDay&&a.find(".calendar-list li:eq("+(this.day+c-2)+")").addClass("active")},pageTurn:function(t,i){var n=this;n.$calendar.find(".calendar-"+t).click(function(){if(!n["disabled"+t]){i.call(n),n.appendDay();var e=a.Event(t+".xui.calendar");e.calendar=n,n.$calendar.trigger(e)}})},prev:function(){this.pageTurn("prev",function(){this.month--,this.month<1&&(this.month=12,this.year--)})},next:function(){this.pageTurn("next",function(){this.month++,this.month>12&&(this.month=1,this.year++)})},dayclick:function(){var t=this,i=this.$calendar.find(".calendar-list");this.set.dayclick&&i.on("click.xui.calendar",">li",function(){if(a(this).attr("data-date")&&!a(this).hasClass("active")){i.find(">.active").removeClass("active"),a(this).addClass("active");var n=a.Event("changeDay.xui.calendar");n.calendar=t,t.$calendar.trigger(n)}})},getDaysInMonth:function(){var a=this.year,t=this.month;return 2!==t?8>t&&t%2===0||t>=8&&t%2===1?30:31:a%4===0&&a%100!==0||a%400===0?29:28}},a.fn.calendarCom=e,a.fn.calendarCom.configDefault=t.configDefault,a.fn.calendarCom.language=t.language}(jQuery);
//# sourceMappingURL=map/calendar.js.map